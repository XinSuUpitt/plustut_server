<% include header %>
	<table class="ui striped table">
	 	<thead>
	    	<tr>
		      	<th>ID</th>
				<th>课程名</th>
				<th>课程代码</th>
				<th>收费标准</th>
				<th>上课时间</th>
				<th>上课日期</th>
				<th>编辑</th>
				<th>删除</th>
	    	</tr>
		  </thead>
		  <tbody>
			  <% classes.forEach(function(singleClass){ %>
				<tr>
					<td><%= singleClass.id %></td>
					<td><%= singleClass.name %></td>
					<td><%= singleClass.code %></td>
					<td><%= singleClass.price %></td>
					<td><%= singleClass.start_time + ' 至 ' + singleClass.end_time %></td>
					<td><%= singleClass.start_date + ' 至 ' + singleClass.end_date + ' 每 ' + singleClass.week_day %></td>
					<td><a href="/edit/<%= singleClass.id %>"><button class="ui primary button" title="编辑">Edit </button></a></td>
					<td><button v-id="<%= singleClass.id %>" class="ui primary button delete" title="删除">Delete </button></td>
				</tr>
			<% }) %>
		  </tbody>
	</table>
	<%- include("pagination",{type:''}) %>
	<script>
		$('.ui.dropdown').dropdown()
		$(function(){
			$('.delete').click((e)=>{
				console.log(e.target.getAttribute('v-id'))
				$.ajax({
					url:'/admin/deleteClassById/'+e.target.getAttribute('v-id'),
					type:'POST',
					success:function(res){
						if (res==='success') {
							window.location.reload()
						}
					}	
				})
			})
		})
	</script>
<% include footer %> 