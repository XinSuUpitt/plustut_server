<% include header %>

<div class="ui form segment" onsubmit="return"  style="width: 60%;margin:0 auto 40px">
  <div class="field">
    <label>课程名称</label>
    <input type="text" name="name" placeholder="课程名称">
  </div>

  <div class="fields equal width">
    <div class="field">
      <label>通用范围</label>
      <select class="ui fluid search dropdown" name="code_level_1">
        <option value="">通用范围</option>
        <option value="H">H(香港)</option>
        <option value="C">C(内地)</option>
        <option value="U">U(通用)</option>
      </select>
    </div>
  </div>

  <div class="fields equal width">
    <div class="field">
      <label>科目</label>
      <select class="ui fluid search dropdown" name="code_level_2">
        <option value="">科目</option>
        <option value="EN">EN(英文)</option>
        <option value="CN">CN(中文)</option>
        <option value="MA">MA(数学)</option>
        <option value="SC">SC(科学)</option>
        <option value="JP">JP(日文)</option>
        <option value="KR">KR(韩文)</option>
        <option value="MO">MO(奥数)</option>
        <option value="TJ">TJ(TOFEL Junior)</option>
        <option value="CA">CA(Cambridge)</option>
        <option value="PC">PC(功课班)</option>
      </select>
    </div>
  </div>

  <div class="fields equal width">
    <div class="field">
      <label>年级</label>
      <select class="ui fluid search dropdown" name="code_level_3">
        <option value="">年级</option>
        <option value="01">小学一年级</option>
        <option value="02">小学二年级</option>
        <option value="03">小学三年级</option>
        <option value="04">小学四年级</option>
        <option value="05">小学五年级</option>
        <option value="06">小学六年级</option>
        <option value="07">中学一年级</option>
        <option value="08">中学二年级</option>
        <option value="09">中学三年级</option>
        <option value="10">中学四年级</option>
        <option value="11">中学五年级</option>
        <option value="12">中学六年级</option>
        <option value="00">不适用</option>
      </select>
    </div>
  </div>

  <div class="fields equal width">
    <div class="field">
      <label>科目细分</label>
      <select class="ui fluid search dropdown" name="code_level_4">
        <option value="">科目细分</option>
        <option value="C">综合</option>
        <option value="L">(语言类)聆听</option>
        <option value="W">(语言类)写作</option>
        <option value="R">(语言类)阅读</option>
        <option value="S">(语言类)口语</option>
        <option value="N">不适用</option>
      </select>
    </div>
  </div>

  <div class="fields equal width">
    <div class="field">
      <label>程度</label>
      <select class="ui fluid search dropdown" name="code_level_5">
        <option value="">程度</option>
        <option value="A">培优</option>
        <option value="B">基础</option>
      </select>
    </div>
  </div>

  <div class="fields equal width">
    <div class="field">
      <label>课程老师</label>
      <input type="text" name="teacher_name" placeholder="课程老师">
    </div>
    <div class="field">
      <label>老师id</label>
      <input type="text" name="teacher_id" placeholder="老师id">
    </div>
  </div>
  
  <!-- <div class="fields equal width"> -->
    <!-- <div class="field">
      <label>老师名字</label>
      <select class="ui fluid search dropdown" name="teacher_name">
        <option value="">老师</option>
        <option value="佟泽洲">佟泽洲</option>
        <option value="李老师@小米">李老师@小米</option>
        <option value="任婉暄">任婉暄</option>
        <option value="其他">其他</option>
      </select>
    </div> -->
    <!-- <div class="field">
      <label>老师id</label>
      <input type="text" name="teacher_id" placeholder="老师id">
    </div> -->
    <!-- <div class="fields">
      <div class="field">
       <label>作者图片</label>
       <input type="file" name="file" multiple>
      </div>
    </div>
	  <div class="field">
	    <label>时间</label>
	    <input type="date" name="time" placeholder="时间">
	  </div> -->
  <!-- </div> -->

  <div class="field">
    <label>上课时间</label>
  </div>
  <div class="fields equal width">
    <input type="time" name="start_time" placeholder="开始时间">
    <label>  至  </label>
    <input type="time" name="end_time" placeholder="结束时间">
  </div>

  <div class="field">
    <label>上课日期</label>
    <input type="date" name="start_date" placeholder="上课起始日期">
    <label> 至 </label>
    <input type="date" name="end_date" placeholder="上课结束日期">
  </div>

  <div class="field">
      <label>哪天上课</label>
      <select class="ui fluid search dropdown" name="week_day">
        <option value="">星期</option>
        <option value="星期日">星期日</option>
        <option value="星期一">星期一</option>
        <option value="星期二">星期二</option>
        <option value="星期三">星期三</option>
        <option value="星期四">星期四</option>
        <option value="星期五">星期五</option>
        <option value="星期六">星期六</option>
      </select>
    </div>

  <div class="field">
    <label>课程价格</label>
    <input type="text" name="price" placeholder="课程价格">
  </div>
  
  <div class="field">
    <label>课程描述</label>
    <textarea placeholder="课程描述" name="description"></textarea>
  </div>
  <div class="ui button submit">Submit</div>
  <div class="ui reset button">重置</div>
  <div class="ui clear button">清除提示</div>
</div>

<!-- <div class="ui form segment" onsubmit="return"  style="width: 60%;margin:0 auto 40px">
  <div class="field">
    <label>文章名称</label>
    <input type="text" name="articlename" placeholder="文章名称">
  </div>
  <div class="fields equal width">
    <div class="field">
      <label>作者</label>
      <select class="ui fluid search dropdown" name="authorname">
        <option value="">作者</option>
        <option value="佟泽洲">佟泽洲</option>
        <option value="李老师@小米">李老师@小米</option>
        <option value="任婉暄">任婉暄</option>
        <option value="其他">其他</option>
      </select>
    </div>
    <div class="fields">
      <div class="field">
       <label>作者图片</label>
       <input type="file" name="file" multiple>
      </div>
    </div>
	  <div class="field">
	    <label>时间</label>
	    <input type="date" name="time" placeholder="时间">
	  </div>
  </div>

  <div class="field">
    <label>文章url</label>
    <input type="text" name="url" placeholder="文章url">
  </div>
  
  <div class="field">
    <label>文章描述</label>
    <textarea placeholder="文章描述" name="description"></textarea>
  </div>
  <div class="field">
    <label>文章内容</label>
    <textarea placeholder="文章内容" name="detail"></textarea>
  </div>
  <div class="ui button submit">Submit</div>
  <div class="ui reset button">重置</div>
  <div class="ui clear button">清除提示</div>
</div> -->



<script>
  $(function(){
    $('select.dropdown').dropdown()
    var formdata = new FormData()
    
    
    var isAllow = true
    if(!isAllow) return
    $('.ui.form')
    .form({
      inline : true,
      on  : 'blur',
      onSuccess: function () {
        isAllow = false;
        ['name'].forEach(function(val) {
          formdata.append(val, $('input[name=' + val + ']').val())
        });
        ['code_level_1'].forEach(function(val) {
            formdata.append(val, $('select[name=' + val + ']').val())
        });
        ['code_level_2'].forEach(function(val) {
            formdata.append(val, $('select[name=' + val + ']').val())
        });
        ['code_level_3'].forEach(function(val) {
            formdata.append(val, $('select[name=' + val + ']').val())
        });
        ['code_level_4'].forEach(function(val) {
            formdata.append(val, $('select[name=' + val + ']').val())
        });
        ['code_level_5'].forEach(function(val) {
            formdata.append(val, $('select[name=' + val + ']').val())
        });
        ['price', 'teacher_id', 'start_time', 'end_time', 'start_date', 'end_date'].forEach(function (val) {
            formdata.append(val, $('input[name=' + val + ']').val())
        });
        ['week_day'].forEach(function(val) {
            formdata.append(val, $('select[name=' + val + ']').val())
        });
        formdata.append('week_day', 0);
        formdata.append('description',$('textarea').val());
        $.ajax({
            url: '/admin/uploadClass',
            type: 'POST',
            cache: false,
            data: formdata,
            processData: false,
            contentType: false,
            dataType: "json",
            success: function (data) {
                isAllow = true
                if (data.code == 200) {
                    alert('上传成功')
                    location.href = '/admin'
                    formdata = new FormData()
                }else{
                  alert('上传失败')  
                  formdata = new FormData()
                }
            }
        });
      }
       ,
      fields: {
        name: {
          identifier: 'articleName',
          rules: [
            {
              type   : 'empty',
              prompt : '请输入名称！'
            }
          ]
        }
      }
    })
  ;
  })
</script>
<% include footer %>   